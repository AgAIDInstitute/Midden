@using Caf.Midden.Core.Models.v0_1_0alpha4
@using Microsoft.AspNetCore.Components
@using AntDesign
@inherits ModalTemplate<Caf.Midden.Wasm.Shared.ViewModels.MetadataDetailsViewModel>
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms
@using Caf.Midden.Wasm.Shared.ViewModels
@inject NavigationManager NavManager

<AntDesign.Row Justify="space-between">
    
    <AntDesign.Col Span="22">
        <strong>@_model.Metadata.Dataset.Zone / @_model.Metadata.Dataset.Project / </strong>
    </AntDesign.Col>
    <AntDesign.Col Span="2">
        <Button Type="primary" OnClick="ViewFull">View Full</Button>
    </AntDesign.Col>
</AntDesign.Row>


<MetadataDetails Metadata="@_model.Metadata" />

@code {
    private MetadataDetailsViewModel _model;

    protected override void OnInitialized()
    {
        _model = base.Options ?? new MetadataDetailsViewModel();
        base.OnInitialized();
    }

    private void ViewFull()
    {
        _ = base.ModalRef.CloseAsync();
        NavManager.NavigateTo($"/catalog/{_model.Metadata.Dataset.Zone}/{_model.Metadata.Dataset.Project}/{_model.Metadata.Dataset.Name}");
    }

    private void OnFinish(EditContext editContext)
    {
        //_ = base.ModalRef.CloseAsync();
    }

    private void OnFinishFailed(EditContext editContext)
    {

    }
}
